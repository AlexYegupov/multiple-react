<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="Web site created using create-react-app"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <link rel="stylesheet" href="./styles.css" />
    <title>React App</title>
  </head>
  <body>
    <script>
     function buttonClicked() {
       const ul = document.getElementById("mylist");
       ul.innerHTML = ul.innerHTML + `<li>${new Date()}</li>`
     }
    </script>

    <div id="root">
      root
    </div>

    <div class="staticcontent">
      <h1>Static content (no React)</h1>

      <div id="external1">external1</div>
      <div id="external2">external2</div>

      <a href="./index.html">index</a>
      <a href="./page2.html">page2</a>
      <a href="./test-jquery.html">test jquery</a>
      <ul id="mylist">
        <li>item 1</li>
        <li>item 2</li>
      </ul>
      <button onclick="buttonClicked()">add item</button>
      <hr />
      <button onclick="window._initRoot2()">init react app 2</button>
    </div>

    <!-- <h1>Other React content</h1> -->
    <div id="root2">
      root2
    </div>

    <div class="externalrouter">
      External router & navigation:
      <nav>
        <ul>
          <li>
            <a href="/" data-router>Home</a>
          </li>
          <li>
            <a href="/page2" data-router>Page2</a>
          </li>
          <li>
            <a href="/page3" data-router>Page3</a>
          </li>
        </ul>
      </nav>

      <div id="rootForRouter">
        this is root for router
      </div>
    </div>

    <script>
     import("./router.mjs").then(({ Router }) => {
       const router = new Router('');
       const root = document.getElementById('rootForRouter');

       router
         .on('/', () => {
           console.log('Home');
           root.innerHTML = `
             <h3>Home</h3>
             <button onclick="window._initReact2()">init react app 2</button>
           `;
         })
         .on('/page2', () => {
           console.log('page2');
           root.innerHTML = `
             <h3>Page2</h3>
             <button onclick="window._initReact3()">init react app 3</button>
           `;
           router.redefineLinks();
         })
         .on('/page3', () => {
           console.log('Page3');
           root.innerHTML = 'Page3';
         })
         .notFound(query => {
           console.log('Not Found', query);
           root.innerHTML = '404';
         })
         .init();

       const btn = document.querySelector('#btn');

       btn.addEventListener('click', () => {
         router.navigate('/page3');
       })
     })
    </script>

  </body>
</html>
